@page "/"
@using GraphQLExample.GraphQL
@inject GraphQLExampleClient client
@rendermode InteractiveServer

<PageTitle>Home</PageTitle>

<div class="flex">
    <div class="w-25 flex-1">
        <button
            class="w-100 mt-1 mb-1 font-bold py-2 px-4 rounded bg-blue-500 text-white hover:bg-blue-700"
            @onclick="GetBooks">Books</button>
    </div>
    <div class="flex-4">
        <ul>
            @if (_books != null)
            {
                @foreach (var book in _books)
                {
                    <li>@book.Title By @book.Author.Name Located in @book.Library.Name</li>
                }
            }
        </ul>
    </div>
</div>

@code {

    IReadOnlyList<IExampleQuery_Books>? _books;

    async Task GetBooks()
    {
        Console.WriteLine("Hello World!");
        var result = await client.ExampleQuery.ExecuteAsync();
        result.EnsureNoErrors();

        _books = result.Data?.Books;
    }

}